<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.2.8-prerelease" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>delete-timestamp: 

Neotw rolling

 ‚Äî A modern notebook based on TiddlyWiki5
</title>
</head>
<body class="tc-body">
<p>
<center>
<div class="gravatar-56" style="max-width: 56px"><img alt="QQ Avatar" class="gravatar-56" src="https://q1.qlogo.cn/g?b=qq&amp;nk=2956398608&amp;s=100"></div>

<h1> oeyoews </h1>
	
</center>

	

</p>
<section class="tc-story-river tc-static-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists " data-tags="" data-tiddler-title="delete-timestamp" role="article">







  
  <div class="gk0wk-notionpagebg gk0wk-notionpagebg-n">
  
  
  </div>










<div class="tc-tiddler-title"><div class="tc-titlebar"><span class="tc-tiddler-controls"><button aria-expanded="false" aria-label="more" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fmore-tiddler-actions" title="More actions"></button><div class=" tc-reveal" hidden="true"></div><button aria-label="favorites" class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Fkookma%2Ffavorites%2Fui%2Fbuttons%2Fadd-remove" title="Add to favorites">
     
		 

		 
 </button><button aria-label="delete" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fdelete" title="Delete this tiddler"></button><button aria-label="permalink" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fpermalink" title="Set browser address bar to a direct link to this tiddler"></button><button aria-label="close others" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose-others" title="Close other tiddlers"></button><span class=" tc-reveal"><button aria-label="fold tiddler" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Ffold" title="Fold the body of this tiddler"></button></span><span class=" tc-reveal" hidden="true"></span><button aria-label="edit" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fedit" title="Edit this tiddler"></button><button class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Foeyoews%2Fneotw%2Fui%2Fcopy-code" title="copy current code"></button><button class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Foeyoews%2Fneotw%2Fui%2Fcopy-title" title="copy current title"></button><button aria-label="new-page" class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Foeyoews%2Ftiddlywiki-static-page%2Fui%2Fnew-page" title="jump new-page and copy url"></button><button aria-label="close" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose" title="Close this tiddler"></button></span><span><h2 class="tc-title">delete-timestamp</h2></span></div><div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div></div><div class="tc-reveal"></div>
<div class=" tc-reveal">
<div class="tc-subtitle">







<span class="nauthor">
  <a class="tc-tiddlylink-external" href="https://github.com/oeyoews" rel="noopener noreferrer" style="text-decoration: none;" target="_blank">
<div class="transform hover:scale-125 inline-flex transition duration-300 ease-in-out">
    <div class="gravatar-56" style="max-width: 16px"><img alt="Avatar" class="shadow-lg" src="https://q1.qlogo.cn/g?b=qq&amp;nk=2956398608@qq.com&amp;s=100" style="max-width: 16px"></div>
</div>
  </a>
oeyoews¬†
</span>


üëâ created 2023/03/19¬†¬†


üìù modified 11 days ago¬†¬†















<span class="o-publish">
<select class="o-select appearance-none p-0.5" title="status" value="public">
  <option disabled="true">status</option>
  <option value="public">public (<span><a class="tc-tiddlylink tc-tiddlylink-missing" href="11.html">11</a></span>)</option>
  <option value="private">private (<span><a class="tc-tiddlylink tc-tiddlylink-missing" href="0.html">0</a></span>)</option>
  <option value="no">draft (<span><a class="tc-tiddlylink tc-tiddlylink-missing" href="0.html">0</a></span>)</option>
  <option value="readonly">readonly (<span><a class="tc-tiddlylink tc-tiddlylink-missing" href="0.html">0</a></span>)</option>
  <option value="article">article (<span><a class="tc-tiddlylink tc-tiddlylink-missing" href="22.html">22</a></span>)</option>
</select>


</span>


</div>
</div>
<div class="tc-tags-wrapper">
  
  
</div>






<div class="tc-tiddler-body prose prose-indigo max-w-none prose-img:my-0 !dark:prose-invert prose-a:no-underline prose-h2:mt-4 prose-blockquote:not-italic tc-reveal"><pre class="hljs"><code class="py hljs"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> colorama <span class="hljs-keyword">import</span> Fore, Style
<span class="hljs-keyword">from</span> halo <span class="hljs-keyword">import</span> Halo
<span class="hljs-keyword">from</span> tqdm <span class="hljs-keyword">import</span> tqdm


<span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_timestamp_lines_in_folder</span>(<span class="hljs-params">folder_path</span>):
    <span class="hljs-comment"># Initialize logging</span>
    logging.basicConfig(filename=<span class="hljs-string">&quot;delete_timestamp_lines.log&quot;</span>,
                        level=logging.INFO, <span class="hljs-built_in">format</span>=<span class="hljs-string">&quot;%(asctime)s - %(message)s&quot;</span>)

    <span class="hljs-comment"># Initialize counter</span>
    num_processed = <span class="hljs-number">0</span>

    <span class="hljs-comment"># Initialize progress bar</span>
    files = []
    <span class="hljs-keyword">for</span> dirpath, dirnames, filenames <span class="hljs-keyword">in</span> os.walk(folder_path):
        <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> filenames:
            <span class="hljs-keyword">if</span> filename.endswith(<span class="hljs-string">&quot;.tid&quot;</span>):
                files.append(os.path.join(dirpath, filename))
    pbar = tqdm(files, desc=<span class="hljs-string">&quot;Processing files&quot;</span>, unit=<span class="hljs-string">&quot;file&quot;</span>)

    <span class="hljs-comment"># Record start time</span>
    start_time = time.time()

    <span class="hljs-keyword">for</span> file_path <span class="hljs-keyword">in</span> pbar:
        pbar.set_postfix(file=file_path)
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">&quot;r+&quot;</span>) <span class="hljs-keyword">as</span> f:
            lines = f.readlines()
            f.seek(<span class="hljs-number">0</span>)
            <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:
                words = line.split()
                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(words) &gt;= <span class="hljs-number">2</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> re.match(<span class="hljs-string">r&#x27;^\d{14,}$&#x27;</span>, words[<span class="hljs-number">1</span>]):
                    f.write(line)
            f.truncate()
        num_processed += <span class="hljs-number">1</span>
        pbar.update()

    <span class="hljs-comment"># Log result</span>
    elapsed_time = time.time() - start_time
    logging.info(<span class="hljs-string">&quot;Processed %d files in %s seconds&quot;</span>, num_processed, <span class="hljs-built_in">str</span>(
        datetime.fromtimestamp(elapsed_time).strftime(<span class="hljs-string">&#x27;%H:%M:%S&#x27;</span>)))

    <span class="hljs-comment"># Close progress bar</span>
    pbar.close()


<span class="hljs-comment"># Example usage:</span>
delete_timestamp_lines_in_folder(<span class="hljs-string">&quot;./tiddlers&quot;</span>)</code></pre></div>
<div class=" tc-reveal">

</div>
<br>

</div></p>
</section>
</body>
</html>

