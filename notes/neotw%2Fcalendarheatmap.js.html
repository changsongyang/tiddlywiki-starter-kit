<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.2.5" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>neotw/calendarheatmap.js:  Neotw ðŸŽ‰
 â€” A modern notebook based on TiddlyWiki5
</title>
</head>
<body class="tc-body">

<section class="tc-story-river tc-static-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists " data-tags="" data-tiddler-title="neotw/calendarheatmap.js" role="article">







  
  <div class="gk0wk-notionpagebg gk0wk-notionpagebg-n">
    <div class="gk0wk-notionbg-addbuttons">
      <button class="" title="Add Cover"><svg class="tc-image-picture tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M112 68.233v-48.23A4.001 4.001 0 00107.997 16H20.003A4.001 4.001 0 0016 20.003v38.31l9.241-14.593c2.8-4.422 9.023-5.008 12.6-1.186l18.247 20.613 13.687-6.407a8 8 0 018.903 1.492 264.97 264.97 0 002.92 2.739 249.44 249.44 0 006.798 6.066 166.5 166.5 0 002.106 1.778c2.108 1.747 3.967 3.188 5.482 4.237.748.518 1.383.92 2.044 1.33.444.117 1.046.144 1.809.05 1.873-.233 4.238-1.144 6.723-2.547a36.016 36.016 0 003.205-2.044c.558-.4.93-.686 1.07-.802.376-.31.765-.577 1.165-.806zM0 8.007A8.01 8.01 0 018.007 0h111.986A8.01 8.01 0 01128 8.007v111.986a8.01 8.01 0 01-8.007 8.007H8.007A8.01 8.01 0 010 119.993V8.007zM95 42a8 8 0 100-16 8 8 0 000 16zM32 76c15.859 4.83 20.035 7.244 20.035 12S32 95.471 32 102.347c0 6.876 1.285 4.99 1.285 9.653H68s-13.685-6.625-13.685-10.8c0-7.665 10.615-8.34 10.615-13.2 0-7.357-14.078-8.833-32.93-12z" fill-rule="evenodd"></path></svg> Add Cover</button>
    </div>
  </div>









<div class="tc-tiddler-title"><div class="tc-titlebar"><span class="tc-tiddler-controls"><button aria-label="trashbin" class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Fkookma%2Ftrashbin%2Fui%2Ftoolbar-button" title="Move this tiddler to Trashbin"> 
















</button><button aria-expanded="false" aria-label="more" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fmore-tiddler-actions" title="More actions"></button><div class=" tc-reveal" hidden="true"></div><button aria-label="favorites" class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Fkookma%2Ffavorites%2Fui%2Fbuttons%2Fadd-remove" title="Add to favorites">
     
		 

		 
 </button><button aria-label="close others" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose-others" title="Close other tiddlers"></button><span class=" tc-reveal"><button aria-label="fold tiddler" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Ffold" title="Fold the body of this tiddler"></button></span><span class=" tc-reveal" hidden="true"></span><button aria-label="edit" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fedit" title="Edit this tiddler"></button><button class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Foeyoews%2Fneotw%2Fui%2Fcopy-code" title="copy current code"></button><button class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Foeyoews%2Fneotw%2Fui%2Fcopy-title" title="copy current title"></button><button class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Foeyoews%2Ftiddlywiki-static-link%2Fui%2Fstatic-link" title="copy static link"></button><button aria-label="new-page" class="tc-btn-invisible tc-btn-%24%3A%2Fplugins%2Foeyoews%2Ftiddlywiki-static-page%2Fui%2Fnew-page" title="new-page"></button><button aria-label="close" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose" title="Close this tiddler"></button></span><span><h2 class="tc-title">neotw/calendarheatmap.js</h2></span></div><div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div></div><div class="tc-reveal"></div>
<div class=" tc-reveal">
<div class="tc-subtitle">





<label class="tc-checkbox "><input type="checkbox"><span></span></label>



<select title="status" value="public">
&lt;/$set&gt;
  <option value="private">private</option>
  <option value="no">hide</option>
  <option value="public">public</option>
</select>

</div>
</div>
<div class="tc-tags-wrapper">
  
  
</div>




<div class="tc-tiddler-body tc-reveal"><pre class="hljs"><code class="javascript hljs"><span class="hljs-built_in">exports</span>.<span class="hljs-property">onUpdate</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">echart</span>) {
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params">year</span>) {
  year = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getFullYear</span>();
  <span class="hljs-keyword">var</span> date = +echarts.<span class="hljs-property">number</span>.<span class="hljs-title function_">parseDate</span>(year + <span class="hljs-string">&#x27;-01-01&#x27;</span>);
  <span class="hljs-keyword">var</span> end = +echarts.<span class="hljs-property">number</span>.<span class="hljs-title function_">parseDate</span>(+year + <span class="hljs-number">1</span> + <span class="hljs-string">&#x27;-01-01&#x27;</span>);
  <span class="hljs-keyword">var</span> dayTime = <span class="hljs-number">3600</span> * <span class="hljs-number">24</span> * <span class="hljs-number">1000</span>;
  <span class="hljs-keyword">var</span> data = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> time = date; time &lt; end; time += dayTime) {
    data.<span class="hljs-title function_">push</span>([
      echarts.<span class="hljs-property">format</span>.<span class="hljs-title function_">formatTime</span>(<span class="hljs-string">&#x27;yyyy-MM-dd&#x27;</span>, time),
      $tw.<span class="hljs-property">wiki</span>.<span class="hljs-title function_">filterTiddlers</span>(<span class="hljs-string">&#x27;[sameday:modified[&#x27;</span> + echarts.<span class="hljs-property">format</span>.<span class="hljs-title function_">formatTime</span>(<span class="hljs-string">&#x27;yyyy-MM-dd&#x27;</span>, time).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/-/g</span>, <span class="hljs-string">&quot;&quot;</span>) + <span class="hljs-string">&#x27;]count[]]&#x27;</span>)
    ]);
  }
  <span class="hljs-keyword">return</span> data;
}
  echart.<span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">tooltip</span>: {
    <span class="hljs-attr">position</span>: <span class="hljs-string">&#x27;top&#x27;</span>,
    <span class="hljs-attr">formatter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">p</span>) {
      <span class="hljs-keyword">var</span> format = echarts.<span class="hljs-property">format</span>.<span class="hljs-title function_">formatTime</span>(<span class="hljs-string">&#x27;yyyy-MM-dd&#x27;</span>, p.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>]);
      <span class="hljs-keyword">return</span> format + <span class="hljs-string">&#x27;: &#x27;</span> + p.<span class="hljs-property">data</span>[<span class="hljs-number">1</span>];
    }
  },
  <span class="hljs-attr">visualMap</span>: {
    <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">max</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">calculable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">orient</span>: <span class="hljs-string">&#x27;vertical&#x27;</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>
  },
  <span class="hljs-attr">calendar</span>: [
    {
      <span class="hljs-attr">left</span>: <span class="hljs-number">90</span>,
      <span class="hljs-attr">cellSize</span>: <span class="hljs-string">&#x27;auto&#x27;</span>,
      <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>,
      <span class="hljs-attr">orient</span>: <span class="hljs-string">&#x27;horizontal&#x27;</span>,
      <span class="hljs-attr">range</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getFullYear</span>(),
      <span class="hljs-attr">dayLabel</span>: {
        <span class="hljs-attr">margin</span>: <span class="hljs-number">5</span>
      }
    }
  ],
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;heatmap&#x27;</span>,
      <span class="hljs-attr">coordinateSystem</span>: <span class="hljs-string">&#x27;calendar&#x27;</span>,
      <span class="hljs-attr">calendarIndex</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">data</span>: <span class="hljs-title function_">getData</span>()
    }
  ]
});
};
</code></pre></div>
<div class=" tc-reveal">

</div>
  <div style="text-align: right">
    
    
        
          <span class=" tc-reveal">
              <button class="tc-btn-invisible giscus-footer">
                
                <svg fill="" height="1em" stroke="" stroke-width="0" t="1569682881658" version="1.1" viewBox="0 0 1024 1024" width="1em" xmlns="http://www.w3.org/2000/svg"><defs></defs><path d="M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zM293 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"></path><path d="M894 345c-48.1-66-115.3-110.1-189-130v0.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l0.8 132.6c0 3.2 0.5 6.4 1.5 9.4 5.3 16.9 23.3 26.2 40.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-0.5 0.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102z m505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-0.2-0.1C613.7 788.2 680.7 742.2 729 676c76.4-105.3 88.8-237.6 44.4-350.4l0.6 0.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"></path><path d="M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"></path></svg>

                
                
                  Show Comments
                
                
                
              </button>
          </span>
          <span class=" tc-reveal" hidden="true"></span>
        
     
  </div>


<br>

</div></p>
</section>
</body>
</html>

