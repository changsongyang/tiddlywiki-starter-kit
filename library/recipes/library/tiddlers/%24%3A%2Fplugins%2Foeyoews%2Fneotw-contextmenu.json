{"title":"$:/plugins/oeyoews/neotw-contextmenu","description":"neotw-contextmenu","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"neotw-contextmenu","meat#disabled":"yes","qrcode":"yes","created":"2024-02-03","dependents":"","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-contextmenu/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-contextmenu/readme\",\"text\":\"<!-- plugin template readme -->\\n\\n## Motivation\\n\\n<!-- your plugin motivation, or why you write this plugin -->\\n\",\"type\":\"text/markdown\",\"description\":\"neotw-contextmenu\"},\"$:/plugins/oeyoews/neotw-contextmenu/viewtemplate\":{\"title\":\"$:/plugins/oeyoews/neotw-contextmenu/viewtemplate\",\"tags\":\"$:/tags/ViewTemplate\",\"text\":\"<$contextMenu />\"},\"$:/plugins/oeyoews/neotw-contextmenu/listener.js\":{\"title\":\"$:/plugins/oeyoews/neotw-contextmenu/listener.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-contextmenu/listener.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-contextmenu widget\\n\\n\\\\*/\\nconst{widget:e}=require(\\\"$:/core/modules/widgets/widget.js\\\");exports.contextMenu=class extends e{constructor(e,t){super(e,t),this.menu=null}render(e,t){if(!$tw.browser)return;if(this.computeAttributes(),this.execute(),this.document.isTiddlyWikiFakeDom)return;const i=this.getVariable(\\\"currentTiddler\\\"),r=this.document.createElement(\\\"div\\\");this.menu=r,r.id=i,r.style.display=\\\"none\\\",r.style.zIndex=\\\"9999\\\",e.addEventListener(\\\"contextmenu\\\",(e=>this.contextmenu(e)))}contextmenu(e){console.log(e.pageX);const t=this.menu;return\\\"block\\\"==t.style.display?this.hideMenu():(t.style.display=\\\"block\\\",t.style.left=e.pageX+\\\"px\\\",t.style.top=e.pageY+\\\"px\\\"),e.preventDefault(),!1}sanitize(e){const t={\\\"&\\\":\\\"&amp;\\\",\\\"<\\\":\\\"&lt;\\\",\\\">\\\":\\\"&gt;\\\",'\\\"':\\\"&quot;\\\",\\\"'\\\":\\\"&#x27;\\\",\\\"/\\\":\\\"&#x2F;\\\"};return e.replace(/[&<>\\\"'/]/gi,(e=>t[e]))}menuClicked(e){var t=e.target.getAttribute(\\\"action\\\"),i=e.target.getAttribute(\\\"targ\\\");let r;return this.hideMenu(),\\\"tm-copy-to-clipboard\\\"===t?(r=$tw.wiki.getTiddlerText(i),this.dispatchEvent({type:t,param:r})):this.dispatchEvent({type:t,param:i}),e.preventDefault(),!1}refresh(){return!1}};\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}