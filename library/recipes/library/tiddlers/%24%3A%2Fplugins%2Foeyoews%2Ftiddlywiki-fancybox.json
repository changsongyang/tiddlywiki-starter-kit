{"title":"$:/plugins/oeyoews/tiddlywiki-fancybox","description":"Tiddlywiki Gallery","author":"oeyoews","version":"0.2.5","core-version":">=5.2.3","type":"application/json","plugin-type":"plugin","name":"Tiddlywiki Fancybox","list":"readme config","dependents":"","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/tiddlywiki-fancybox/icon\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-fancybox/icon\",\"text\":\"<svg stroke=\\\"currentColor\\\" fill=\\\"currentColor\\\" stroke-width=\\\"0\\\" version=\\\"1\\\" viewBox=\\\"0 0 48 48\\\" enable-background=\\\"new 0 0 48 48\\\" height=\\\"1em\\\" width=\\\"1em\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill=\\\"#8BC34A\\\" d=\\\"M39,15c0-2.2-1.8-4-4-4h-6c-0.7,0-1.1-0.8-0.7-1.4c0.6-1,0.9-2.2,0.6-3.5c-0.4-2-1.9-3.6-3.8-4 C21.8,1.4,19,3.9,19,7c0,1,0.3,1.8,0.7,2.6c0.4,0.6,0,1.4-0.8,1.4h-6c-2.2,0-4,1.8-4,4v7c0,0.7,0.8,1.1,1.4,0.7 c1-0.6,2.2-0.9,3.5-0.6c2,0.4,3.6,1.9,4,3.8c0.7,3.2-1.8,6.1-4.9,6.1c-1,0-1.8-0.3-2.6-0.7C9.8,30.9,9,31.3,9,32v6c0,2.2,1.8,4,4,4 h22c2.2,0,4-1.8,4-4V15z\\\"></path></svg>\\n\"},\"$:/plugins/oeyoews/tiddlywiki-fancybox/readme\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-fancybox/readme\",\"text\":\"!! Readme\\n\\n<!-- * 只需要安装此插件即可， 无需额外配置， 自动识别图片tiddlywiki当前界面(不是所有)的所有图片, -->\\n<!-- 点击即可放大图片(如果不起作用, 请刷新tiddlywiki使用)， -->\\n`Updated Time:  2023-01-06 11:45:14+0800`\\n <!-- 后期更新说明请点击 [[readme|https://oeyoewl.top/fancybox-gallery-tiddlywiki]] -->\\n\\n* [[Demo|https://neotw.netlify.app/main.html#%24%3A%2Fplugins%2Foeyoews%2Ftiddlywiki-fancybox]]\\n\\n* [[Source|https://github.com/oeyoews/neotw/tree/main/dev/plugins/tiddlywiki-fancybox]]\\n\\n* [[Tiddlyhost site|https://fancybox-oeyoews.tiddlyhost.com]]\\n\\n!! Features\\n\\n* support download images, fullscreen, custom style and shortcuts,\\n<!-- !! Note -->\\n<!-- * 由于是动态给img加上一个父标签, -->\\n<!-- 只会渲染启动时识别到的img标签，如果导入新的图片或者打开新的含有图片的tiddler, -->\\n<!-- 则需要重新刷新当前界面，让插件重新渲染DOM -->\\n<!-- * how to add refresh tip on tiddlywiki js?? -->\\n\\n!! Usage\\n\\n<!-- !!! 分组 -->\\n<!-- * 如果一个tiddler 中的图片来自多个其他的tiddler, 则会展示多个tid的图片分组, -->\\n<!-- 如果当前tiddler的图片全部来自单个tiddler则会只会展示一个图片分组(此功能目前借助<<qualify>> -->\\n<!-- 宏实现) -->\\n{{$:/plugins/oeyoews/tiddlywiki-fancybox/example}}\\n\\n!! Links\\n\\n* fancybox: https://github.com/fancyapps/fancybox\\n\\n!! Note\\n\\n* not support local svg at least\\n\"},\"$:/plugins/oeyoews/tiddlywiki-fancybox/config\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-fancybox/config\",\"text\":\"\\\\define tid() $:/plugins/oeyoews/tiddlywiki-fancybox/init\\n\\\\define tid-msg() $:/plugins/oeyoews/tiddlywiki-fancybox/msg\\n\\\\define tag() $:/tags/RawMarkupWikified/BottomBody\\n\\\\define mode() $:/status/tiddlywiki-fancybox/mode\\n\\n<!-- one config -->\\n<$list filter=<<mode>> variable=\\\".state\\\">\\n\\n  <!-- add  -->\\n  <$reveal state=<<.state>> type=\\\"nomatch\\\" text=\\\"hide\\\">\\n    <$fieldmangler tiddler=<<tid>> >\\n      <$button set=<<.state>> setTo=\\\"hide\\\">Enable Fancybox Global {{neotw/icon/approve}}\\n        <$action-sendmessage $message=\\\"tm-add-tag\\\" $param=<<tag>>/>\\n        <$action-sendmessage $message=\\\"tm-notify\\\" $param=<<tid-msg>>/>\\n      </$button>\\n    </$fieldmangler>\\n  </$reveal>\\n\\n  <!-- remove -->\\n  <$reveal state=<<.state>> type=\\\"match\\\" text=\\\"hide\\\">\\n    <$fieldmangler tiddler=<<tid>> >\\n      <$button set=<<.state>> setTo=\\\"show\\\">Disable Fancybox Global {{neotw/icon/warn}}\\n        <$action-sendmessage $message=\\\"tm-remove-tag\\\" $param=<<tag>>/>\\n        <$action-sendmessage $message=\\\"tm-notify\\\" $param=<<tid-msg>>/>\\n      </$button>\\n    </$fieldmangler>\\n  </$reveal>\\n\\n</$list>\\n\\n<!-- second config -->\\n\\n<!-- <$list filter=<<mode>> variable=\\\".state\\\"> -->\\n<!---->\\n<!--   <!-- add  -->\\n<!--   <$reveal state=<<.state>> type=\\\"nomatch\\\" text=\\\"hide\\\"> -->\\n<!--     <$fieldmangler tiddler=<<tid>> > -->\\n<!--       <$button set=<<.state>> setTo=\\\"hide\\\">Enable Fancybox Global {{neotw/icon/approve}} -->\\n<!--         <$action-sendmessage $message=\\\"tm-add-tag\\\" $param=<<tag>>/> -->\\n<!--         <$action-sendmessage $message=\\\"tm-notify\\\" $param=<<tid-msg>>/> -->\\n<!--       </$button> -->\\n<!--     </$fieldmangler> -->\\n<!--   </$reveal> -->\\n<!---->\\n<!--   <!-- remove -->\\n<!--   <$reveal state=<<.state>> type=\\\"match\\\" text=\\\"hide\\\"> -->\\n<!--     <$fieldmangler tiddler=<<tid>> > -->\\n<!--       <$button set=<<.state>> setTo=\\\"show\\\">Disable Fancybox Global {{neotw/icon/warn}} -->\\n<!--         <$action-sendmessage $message=\\\"tm-remove-tag\\\" $param=<<tag>>/> -->\\n<!--         <$action-sendmessage $message=\\\"tm-notify\\\" $param=<<tid-msg>>/> -->\\n<!--       </$button> -->\\n<!--     </$fieldmangler> -->\\n<!--   </$reveal> -->\\n<!---->\\n<!-- </$list> -->\\n\\n<!-- add config -->\\n<$button>\\n  <$action-deletetiddler $tiddler=<<tid>>/>\\n  <$action-sendmessage $message=\\\"tm-notify\\\" $param=<<tid-msg>>/>\\n  Reset Fancybox Configuration {{neotw/icon/reset}}\\n</$button>\\n\"},\"$:/plugins/oeyoews/tiddlywiki-fancybox/example\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-fancybox/example\",\"text\":\"<center>\\n  <b>Fancybox Single Image</b>\\n</center>\\n\\n```wikitext\\n<<Fancybox \\\"https://lipsum.app/id/66/1200x675\\\" >>\\n```\\n\\n<center>\\n  <<Fancybox \\\"https://lipsum.app/id/66/1200x675\\\"\\n  caption: \\\"First Image\\\"\\n  group: \\\"first\\\"\\n  >>\\n</center>\\n\\n<center>\\n  <<Fancybox \\\"https://lipsum.app/id/77/1200x675\\\"\\n  caption: \\\"Second Image\\\"\\n  group: \\\"second\\\"\\n  >>\\n</center>\\n\\n```wikitext\\n<<Fancybox\\n\\\"\\\"\\\"\\nhttps://lipsum.app/id/77/1200x675\\nhttps://lipsum.app/id/66/1200x675\\nhttps://lipsum.app/id/55/1200x675\\n\\\"\\\"\\\"\\ncaption: \\\"xxx\\\"\\nwidth: 256\\n>>\\n```\\n\\n<center>\\n  <b>Fancybox Gallery Usage </b>\\n</center>\\n\\n<center>\\n  <<Fancybox\\n  \\\"\\\"\\\"\\n  https://lipsum.app/id/77/1200x675\\n  https://lipsum.app/id/66/1200x675\\n  https://lipsum.app/id/55/1200x675\\n  \\\"\\\"\\\"\\n  group: \\\"Gallary Group\\\"\\n  width: 300\\n  >>\\n</center>\\n\\n!! Fancybox Macro Parameters\\n\\n* `links` one or more https://xxx link\\n* `width` default is 256\\n* `caption`\\n\\n!! Shortcuts\\n\\n* <kbd>f</kbd> toggle thumbs\\n* j / n  next image\\n* k / p  prev image\\n* q / esc / del close\\n\\n!! Local Image\\n\\n<!-- <<FancyboxL \\\"image.png\\\">> -->\\n\"},\"$:/plugins/oeyoews/tiddlywiki-fancybox/fancybox\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-fancybox/fancybox\",\"type\":\"application/javascript\",\"tags\":\"$:/tags/RawMarkup\",\"hide-body\":\"yes\",\"text\":\"<!-- dont builtin css, not work -->\\n<link rel=\\\"stylesheet\\\" href=\\\"https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0.31/dist/fancybox.css\\\">\\n<script  src=\\\"https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0.31/dist/fancybox.umd.min.js\\\"></script>\\n\\n<!-- disable zoom is true ??? -->\\n<script>\\nFancybox.defaults.Toolbar = {\\n  display: [\\n    { id: \\\"prev\\\", position: \\\"center\\\" },\\n    { id: \\\"counter\\\", position: \\\"center\\\" },\\n    { id: \\\"next\\\", position: \\\"center\\\" },\\n    \\\"zoom\\\",\\n    \\\"slideshow\\\",\\n    \\\"fullscreen\\\",\\n    \\\"download\\\",\\n    \\\"thumbs\\\",\\n    \\\"close\\\",\\n  ],\\n};\\nFancybox.defaults.fullscreen = {\\n  autoStart: false,\\n};\\nFancybox.defaults.Thumbs = {\\n  autoStart: true,\\n  key: \\\"f\\\",\\n};\\nFancybox.defaults.keyboard = {\\n  Delete: \\\"close\\\",\\n  Escape: \\\"close\\\",\\n  [\\\"q\\\"]: \\\"close\\\",\\n  Backspace: \\\"close\\\",\\n  PageUp: \\\"next\\\",\\n  PageDown: \\\"prev\\\",\\n  [\\\"k\\\"]: \\\"prev\\\",\\n  [\\\"p\\\"]: \\\"prev\\\",\\n  ArrowUp: \\\"next\\\",\\n  [\\\"j\\\"]: \\\"next\\\",\\n  [\\\"n\\\"]: \\\"next\\\",\\n  ArrowDown: \\\"prev\\\",\\n  ArrowRight: \\\"next\\\",\\n  ArrowLeft: \\\"prev\\\",\\n};\\nFancybox.defaults.Image = { zoom: false };\\nFancybox.defaults.Hash = false;\\n</script>\\n\\n<!-- custom thumbnail -->\\n<style>\\n.fancybox__container {\\n  --fancybox-thumbs-border-radius: 50%;\\n  --fancybox-thumbs-ratio: 1;\\n  --fancybox-thumbs-width: 50px;\\n  --fancybox-thumbs-height: 50px;\\n  --fancybox-accent-color: #F472B6;\\n}\\n</style>\\n\\n<script>\\nconsole.log(\\\"%c🦊 Yay! Fancybox is working! 🎉\\\", \\\"background: linear-gradient(45deg, #fc466b, #3f5efb); color: black;border-radius: 3px;padding: 3px;\\\")\\n</script>\\n\"},\"$:/plugins/oeyoews/tiddlywiki-fancybox/init\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-fancybox/init\",\"type\":\"application/javascript\",\"<!-- tags\":\"$:/tags/RawMarkupWikified/BottomBody -->\",\"text\":\"<!-- how to remove jq -->\\n<!-- `<script> -->\\n<!-- $(\\\"img\\\").each(function () { -->\\n<!--     var element = document.createElement(\\\"a\\\"); -->\\n<!--     $(element).attr(\\\"data-fancybox\\\", \\\"gallery\\\"); -->\\n<!--     $(element).attr(\\\"href\\\", $(this).attr(\\\"src\\\")); -->\\n<!--     $(this).wrap(element); -->\\n<!-- }); -->\\n<!-- `</script>` -->\\n\\n<!-- no jq -->\\n<!-- just for local temporary, render again -->\\n`<script>\\n      const lables = document.querySelectorAll(\\\"img\\\");\\n      const elem = document.createElement(\\\"a\\\");\\n      lables.forEach((lable, index) => {\\n        const elem = document.createElement(\\\"a\\\");\\n        elem.href = lable.getAttribute(\\\"src\\\")\\n        elem.setAttribute(\\\"data-fancybox\\\", \\\"gallary\\\");\\n        lable.parentNode.replaceChild(elem, lable);\\n        elem.appendChild(lable);\\n      });`\\n`</script>`\\n\"},\"$:/plugins/oeyoews/tiddlywiki-fancybox/macro\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-fancybox/macro\",\"tags\":\"$:/tags/Macro\",\"text\":\"\\\\whitespace trim\\n\\n\\\\define Fancybox(links, caption, group, width:256)\\n<$list filter=\\\"[enlist<__links__>]\\\" variable=\\\"link\\\">\\n    <a\\n      href=<<link>>\\n      data-fancybox=<<qualify  \\\"\\\"\\\"$group$\\\"\\\"\\\">>\\n      data-caption=\\\"\\\"\\\"$caption$\\\"\\\"\\\">\\n      <$image\\n        source=<<link>>\\n        loading=\\\"lazy\\\"\\n        tooltip=<<link>>\\n        width=$width$\\n        class=\\\"rounded\\\"/>\\n    </a>\\n</$list>\\n\\\\end\\n\\n\\\\define imagetobase64()  [{!!text}] [[;base64,]] [{!!type}] [[data:]] :and[reverse[]join[]]\\n\\n<!-- it slow and make tiddlywiki slow, so just use one image every times -->\\n<!-- NOTE: cant have slash like xxx/image.png -->\\n<!-- not support canonical_uri -->\\n<!-- not recommend use this macro -->\\n\\\\define FancyboxL(link, width:256)\\n<$let currentTiddler=$link$>\\n  <a\\n     data-fancybox=<<qualify>>\\n     data-caption=$link$\\n     href={{{ [subfilter<imagetobase64>] }}}\\n     >\\n    <$image\\n      source=$link$\\n      tooltip=$link$\\n      loading=\\\"lazy\\\"\\n      width=$width$\\n      class=\\\"rounded\\\"/>\\n  </a>\\n</$let>\\n\\\\end\\n\"},\"$:/plugins/oeyoews/tiddlywiki-fancybox/msg\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-fancybox/msg\",\"text\":\"Maybe you should refresh your tiddlywiki for tiddlywiki-fancybox plugin\\n\"},\"$:/plugins/oeyoews/tiddlywiki-fancybox/rounded\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-fancybox/rounded\",\"type\":\"application/javascript\",\"tags\":\"$:/tags/RawMarkup\",\"hide-body\":\"yes\",\"text\":\"<!-- custom thumbnail -->\\n<style>\\n.fancybox__container {\\n  --fancybox-thumbs-border-radius: 50%;\\n  --fancybox-thumbs-ratio: 1;\\n  --fancybox-thumbs-width: 50px;\\n  --fancybox-thumbs-height: 50px;\\n  --fancybox-accent-color: #F472B6;\\n}\\n</style>\\n\"},\"$:/plugins/oeyoews/tiddlywiki-fancybox/style\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-fancybox/style\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\"<!-- remove a underline -->\\na[data-fancybox] {\\n  text-decoration: none !important;\\n}sty\\n\\n<!-- add custom css -->\\n<!-- not work ?? -->\\na[data-fancybox] img {\\n   border-radius: 0.25rem;\\n}\\n\\n.rounded {\\n   border-radius: 0.25rem;\\n}\\n\"}}}"}