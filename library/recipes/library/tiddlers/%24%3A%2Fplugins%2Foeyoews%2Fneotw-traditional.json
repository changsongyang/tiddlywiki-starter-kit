{"title":"$:/plugins/oeyoews/neotw-traditional","description":"Neotw Traditional","author":"oeyoews","version":"0.0.1","core-version":">=5.2.5","type":"application/json","plugin-type":"plugin","name":"Neotw Traditonal","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme explore","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-traditional/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-traditional/readme\",\"text\":\"!! Neotw Traditonal\\n\\n* [[Source|https://github.com/oeyoews/neotw/tree/main/plugins/oeyoews/neotw-traditional]]\\n* [[Demo|https://oeyoews.github.io/neotw]]\\n\\n!! TODO\\n\\n* 设置body global\\n\"},\"demodemo-tra\":{\"title\":\"demodemo-tra\",\"tags\":\"$:/tags/ViewToolbar\",\"description\":\"ui\",\"list-before\":\"$:/core/ui/Buttons/close\",\"caption\":\"\",\"list-after\":\"\",\"text\":\"\\\\whitespace trim\\n<$traditional />\\n\"},\"$:/plugins/oeyoews/neotw-traditional/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-traditional/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-traditional/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-traditional widget\\n\\n\\\\*/\\n// 判断系统\\n(function () {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  if (!$tw.browser) return;\\n\\n  const Widget = require('$:/core/modules/widgets/widget.js').widget;\\n\\n  class DivWidget extends Widget {\\n    constructor(parseTreeNode, options) {\\n      super(parseTreeNode, options);\\n      this.currentTiddler = this.getVariable('currentTiddler');\\n      this.id = document.querySelector(\\n        `[data-tiddler-title=${this.currentTiddler}]`,\\n      );\\n      this.traditional = false;\\n    }\\n\\n    render(parent, nextSibling) {\\n      this.parentDomNode = parent;\\n      this.computeAttributes();\\n      this.execute();\\n\\n      const classNames = this.getAttribute('class', '').split('');\\n\\n      const buttonNode = $tw.utils.domMaker('span', {\\n        // how to refresh this dom\\n        text: this.traditional ? '简' : '繁',\\n        class: 'cursor-pointer text',\\n        attributes: {},\\n        children: [],\\n        eventListeners: [\\n          {\\n            name: 'click',\\n            handlerObject: this,\\n            handlerMethod: 'handlerClick',\\n          },\\n        ],\\n      });\\n      classNames.forEach(className => {\\n        if (className) {\\n          buttonNode.classList.add(className);\\n        }\\n      });\\n      parent.insertBefore(buttonNode, nextSibling);\\n      this.domNodes.push(buttonNode);\\n    }\\n\\n    handlerClick = () => {\\n      this.id.style.fontFamily = !this.traditional ? 'PingFang SC' : '';\\n      this.id.style.fontVariantEastAsian = !this.traditional\\n        ? 'traditional'\\n        : 'simplified';\\n      // this.id.style = !this.traditional ? null : '';\\n      this.traditional = !this.traditional;\\n    };\\n  }\\n\\n  exports['traditional'] = DivWidget;\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}