{"title":"$:/plugins/oeyoews/neotw-recent-cards","description":"neotw-recent-cards","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","parent-plugin":"$:/plugins/oeyoews/neotw","plugin-type":"plugin","name":"neotw-recent-cards","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-recent-cards/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-recent-cards/readme\",\"description\":\"neotw-recent-cards\",\"text\":\"!! 显示最近更新动态\\n\"},\"$:/plugins/oeyoews/neotw-recent-cards/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-recent-cards/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-recent-cards/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-recent-cards widget\\n\\n\\\\*/\\n(function () {\\n  /*jslint node: true, browser: true */\\n\\n  /*global $tw: false */\\n  'use strict';\\n\\n  const Widget = require('$:/core/modules/widgets/widget.js').widget;\\n\\n  class cardsWidget extends Widget {\\n    constructor(parseTreeNode, options) {\\n      super(parseTreeNode, options);\\n      this.recentTiddlers = $tw.wiki.filterTiddlers(\\n        '[!is[system]!has[draft.of]!sort[created]limit[9]]',\\n      );\\n    }\\n\\n    render(parent, nextSibling) {\\n      if (!$tw.browser) return;\\n\\n      this.parentDomNode = parent;\\n      this.computeAttributes();\\n      this.execute();\\n\\n      const wiki = $tw.wiki;\\n\\n      const recentTiddlers = this.recentTiddlers;\\n\\n      const data = recentTiddlers.map((tiddler) => {\\n        const { fields } = wiki.getTiddler(tiddler);\\n        const cover =\\n          fields['page-cover'] ||\\n          `https://source.unsplash.com/random?fm=blurhash&w=50&${fields.title}`;\\n        return {\\n          title: fields.title,\\n          cover,\\n        };\\n      });\\n\\n      const container = document.createElement('div');\\n      container.classList.add(\\n        'grid',\\n        'grid-cols-1',\\n        'sm:grid-cols-2',\\n        'md:grid-cols-3',\\n        'gap-3',\\n      );\\n\\n      // TODP: use navigate not href directly\\n      container.innerHTML = data\\n        .map((item) => {\\n          return `\\n    <div class=\\\"flex flex-col items-center group p-0\\\">\\n      <a class=\\\"text-black truncate group-hover:underline mb-2\\\" href=\\\"#${item.title}\\\">${item.title}</a>\\n       <img class=\\\"w-48 h-48 rounded-sm group-hover:scale-105 transition duration-400 ease-in-out\\\" src=\\\"${item.cover}\\\" />\\n    </div>\\n  `;\\n        })\\n        .join('');\\n\\n      parent.insertBefore(container, nextSibling);\\n      this.domNodes.push(container);\\n    }\\n\\n    // 不要进行实时更新\\n    /* refresh() {\\n      const recentTiddlers = $tw.wiki.filterTiddlers(\\n        '[!is[system]!has[draft.of]!sort[created]limit[9]]',\\n      );\\n      if (recentTiddlers[0] !== this.recentTiddlers[0]) {\\n        this.refreshSelf();\\n        console.log('updated');\\n      }\\n    } */\\n  }\\n\\n  exports.cards = cardsWidget;\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}