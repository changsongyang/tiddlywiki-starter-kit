{"title":"$:/plugins/oeyoews/neotw-image-gallery","description":"neotw-image-gallery","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"neotw-image-gallery","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-image-gallery/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-image-gallery/readme\",\"text\":\"## usage\\r\\n\\r\\n```wikitext\\r\\n<$gallery json=\\\"image-list.json\\\">\\r\\n```\\r\\n\\r\\n<$gallery json=\\\"image-list.json\\\">\\r\\n\\r\\n## TODO\\r\\n\\r\\n<!-- * - [ ] 优化布局, tailwindcss or http://macyjs.com/ -->\",\"type\":\"text/markdown\",\"description\":\"neotw-image-gallery\"},\"$:/plugins/oeyoews/neotw-image-gallery/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-image-gallery/widget.js\",\"text\":\"/*\\\\\\r\\ntitle: $:/plugins/oeyoews/neotw-image-gallery/widget.js\\r\\ntype: application/javascript\\r\\nmodule-type: widget\\r\\n\\r\\nneotw-image-gallery widget\\r\\n\\r\\n\\\\*/\\r\\nconst { widget: Widget } = require('$:/core/modules/widgets/widget.js');\\r\\n\\r\\nclass GalleryWidget extends Widget {\\r\\n  constructor(parseTreeNode, options) {\\r\\n    super(parseTreeNode, options);\\r\\n  }\\r\\n\\r\\n  render(parent, nextSibling) {\\r\\n    this.parentDomNode = parent;\\r\\n    this.computeAttributes();\\r\\n    this.execute();\\r\\n\\r\\n    const createElement = $tw.utils.domMaker;\\r\\n    const { json = 'image-list.json' } = this.attributes;\\r\\n\\r\\n    const data = $tw.wiki.getTiddlerData(json);\\r\\n    const imagesURL = Object.entries(data);\\r\\n\\r\\n    const createImageNode = (title, src) =>\\r\\n      createElement('img', {\\r\\n        // support spotlight\\r\\n        class: 'rounded object-cover w-full h-full aspect-video spotlight',\\r\\n        attributes: {\\r\\n          src,\\r\\n          loading: 'lazy',\\r\\n          title,\\r\\n        },\\r\\n      });\\r\\n\\r\\n    const children = [];\\r\\n\\r\\n    imagesURL.forEach(([title, src]) => {\\r\\n      children.push(createImageNode(title, src));\\r\\n    });\\r\\n\\r\\n    const domNode = createElement('div', {\\r\\n      class: 'grid grid-cols-1 md:grid-cols-3 gap-4',\\r\\n      children,\\r\\n    });\\r\\n\\r\\n    parent.insertBefore(domNode, nextSibling);\\r\\n    this.domNodes.push(domNode);\\r\\n  }\\r\\n}\\r\\n\\r\\n/**\\r\\n * @description neotw-image-gallery widget\\r\\n * @param {json}\\r\\n */\\r\\nexports.gallery = GalleryWidget;\\r\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}