{"title":"$:/plugins/oeyoews/neotw-reverse-card","description":"翻转卡片","author":"oeyoews","version":"0.0.2","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"neotw-reverse-card","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-reverse-card/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-reverse-card/readme\",\"description\":\"neotw-reverse-card\",\"text\":\"!! 介绍\\n\\n> 卡片在点击后, 如果五秒内没有被点击, 则重新翻转到正面\\n\\n<$rcard />\\n<$rcard json=\\\"$:/plugins/oeyoews/neotw-reverse-card/tw.json\\\"/>\\n<$rcard json=\\\"$:/plugins/oeyoews/neotw-reverse-card/01.json\\\"/>\\n\\n```\\n<$rcard question=\\\"xxx\\\" answer=\\\"xxx\\\" />\\n<$rcard json=\\\"xxx.json\\\" />\\n```\\n\\n!! TODO\\n\\n* 支持同时设置一组问题, 并且允许next, stop, restart, 得分记录(目前支持json文件)\\n* 使用2:3的经典书籍卡片比例\\n* 悬浮三秒以上, 自动进行翻转(实现比较容易, 暂时不做)\\n* 做成短视频的上下滑动的卡片效果(实现比较容易, 暂时不做)\\n\"},\"$:/plugins/oeyoews/neotw-reverse-card/01.json\":{\"text\":\"[\\n  {\\n    \\\"q\\\": \\\"advocate\\\",\\n    \\\"a\\\": \\\"v. 提倡，拥护\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"accumulate\\\",\\n    \\\"a\\\": \\\"v. 积累，积聚\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"attribute\\\",\\n    \\\"a\\\": \\\"n. 属性，特征；v. 归因于\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"anticipate\\\",\\n    \\\"a\\\": \\\"v. 预期，预料\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"assert\\\",\\n    \\\"a\\\": \\\"v. 断言，声称\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"assign\\\",\\n    \\\"a\\\": \\\"v. 分配，指派\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"appreciate\\\",\\n    \\\"a\\\": \\\"v. 欣赏，感激\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"annotate\\\",\\n    \\\"a\\\": \\\"v. 注解，批注\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"articulate\\\",\\n    \\\"a\\\": \\\"v. 清楚地表达，发音清晰\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"authorize\\\",\\n    \\\"a\\\": \\\"v. 授权，批准\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"assume\\\",\\n    \\\"a\\\": \\\"v. 假设，假定\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"abandon\\\",\\n    \\\"a\\\": \\\"vt. 放弃，抛弃\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"calculate\\\",\\n    \\\"a\\\": \\\"v. 计算，估计\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"bear\\\",\\n    \\\"a\\\": \\\"v. 忍受，承受\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"coincide\\\",\\n    \\\"a\\\": \\\"v. 一致，同时发生\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"cite\\\",\\n    \\\"a\\\": \\\"v. 引用，引述\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"compile\\\",\\n    \\\"a\\\": \\\"v. 编辑，汇编\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"clarify\\\",\\n    \\\"a\\\": \\\"v. 澄清，阐明\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"adhere\\\",\\n    \\\"a\\\": \\\"v. 黏附，粘着\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"attain\\\",\\n    \\\"a\\\": \\\"v. 达到，实现\\\"\\n  }\\n]\",\"type\":\"application/json\",\"title\":\"$:/plugins/oeyoews/neotw-reverse-card/01.json\"},\"$:/plugins/oeyoews/neotw-reverse-card/tw.json\":{\"text\":\"[\\n  {\\n    \\\"q\\\": \\\"太微的LOGO是什么动物?\\\",\\n    \\\"a\\\": \\\"猫\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"太微的最新版本号是多少???\\\",\\n    \\\"a\\\": \\\"5.3.1\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"太微作者是谁?\\\",\\n    \\\"a\\\": \\\"Jeremy Ruston\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"太微的原名是什么?\\\",\\n    \\\"a\\\": \\\"TiddlyWiki5\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"太微有多久了?\\\",\\n    \\\"a\\\": \\\"19年\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"太微的主要功能有哪些?\\\",\\n    \\\"a\\\": \\\"太微的主要功能包括文本编辑、笔记管理、标签分类、插件扩展等。\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"太微支持哪些语言？\\\",\\n    \\\"a\\\": \\\"太微支持多种语言，包括但不限于英语、中文、法语、德语、西班牙语等。\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"太微可以在哪些操作系统上运行？\\\",\\n    \\\"a\\\": \\\"太微可以在 Windows、Mac OS、Linux 等多个主流操作系统上运行。\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"太微有哪些常见用途？\\\",\\n    \\\"a\\\": \\\"太微常用于个人知识管理、笔记记录、项目管理、日程安排等方面。\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"太微有哪些特色功能和优势？\\\",\\n    \\\"a\\\": \\\"太微具有离线工作、可扩展性强、自定义样式、版本控制等特色功能和优势。\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"太微开源吗？如何参与贡献？\\\",\\n    \\\"a\\\": \\\"是的，太微是开源软件。您可以在 GitHub 上找到太微的源代码，并参与贡献、提交问题或提出改进建议。\\\"\\n  },\\n  {\\n    \\\"q\\\": \\\"太微有哪些插件可用？如何管理插件？\\\",\\n    \\\"a\\\": \\\"太微有丰富的插件库可供选择，包括主题、工具栏扩展、语法高亮等。您可以通过插件管理界面进行插件的安装、更新和管理。\\\"\\n  }\\n]\\n\",\"type\":\"application/json\",\"title\":\"$:/plugins/oeyoews/neotw-reverse-card/tw.json\"},\"$:/plugins/oeyoews/neotw-reverse-card/createCard.js\":{\"title\":\"$:/plugins/oeyoews/neotw-reverse-card/createCard.js\",\"text\":\"/*\\\\\\r\\ntitle: $:/plugins/oeyoews/neotw-reverse-card/createCard.js\\r\\ntype: application/javascript\\r\\nmodule-type: library\\r\\n\\r\\n\\\\*/\\r\\n\\r\\nfunction createCard(question, answer) {\\r\\n  const createElement = $tw.utils.domMaker;\\r\\n\\r\\n  function iconify(icon = 'flat-color-icons:questions', visible = true) {\\r\\n    return createElement('iconify-icon', {\\r\\n      class: `absolute fixed top-2 left-2 transition-all duration-300 ease-in-out ${visible ? '' : 'scale-0'\\r\\n        }`,\\r\\n      attributes: {\\r\\n        icon,\\r\\n      },\\r\\n    });\\r\\n  }\\r\\n\\r\\n  // 创建正面卡片元素\\r\\n  const frontCard = createElement('div', {\\r\\n    class:\\r\\n      'shadow flex justify-center items-center p-4 card-face bg-[#f2f2f2] p-2 rounded-lg w-full h-full absolute cursor-pointer',\\r\\n    text: question,\\r\\n  });\\r\\n\\r\\n  // 创建背面卡片元素\\r\\n  const backCard = createElement('div', {\\r\\n    class:\\r\\n      'shadow card-face h-full w-full flex p-4 justify-center items-center bg-neutral-200 card-back rounded-lg absolute cursor-pointer',\\r\\n    text: answer,\\r\\n  });\\r\\n\\r\\n  const cardInner = createElement('div', {\\r\\n    class: 'card-inner aspect-video',\\r\\n    children: [frontCard, backCard],\\r\\n  });\\r\\n\\r\\n  const iconq = iconify();\\r\\n  const icona = iconify('flat-color-icons:approval', false);\\r\\n\\r\\n  const card = createElement('div', {\\r\\n    class: 'ocard border-none',\\r\\n    children: [cardInner, iconq, icona],\\r\\n  });\\r\\n\\r\\n  // 创建父容器元素\\r\\n  const container = createElement('div', {\\r\\n    class:\\r\\n      'flex justify-center items-center dark:text-black my-4 snap-center text-[22px]',\\r\\n    children: [card],\\r\\n  });\\r\\n\\r\\n  let flipTimer;\\r\\n\\r\\n  card.addEventListener('click', () => {\\r\\n    card.classList.toggle('flipped');\\r\\n    iconq.classList.toggle('scale-0');\\r\\n    icona.classList.toggle('scale-0');\\r\\n    const hasFlipped = card.classList.contains('flipped');\\r\\n    clearTimeout(flipTimer);\\r\\n\\r\\n    if (hasFlipped) {\\r\\n      flipTimer = setTimeout(() => {\\r\\n        card.classList.remove('flipped');\\r\\n        iconq.classList.toggle('scale-0');\\r\\n        icona.classList.toggle('scale-0');\\r\\n      }, 5000);\\r\\n    }\\r\\n  });\\r\\n\\r\\n  return container;\\r\\n}\\r\\n\\r\\nmodule.exports = createCard;\\r\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/plugins/oeyoews/neotw-reverse-card/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-reverse-card/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-reverse-card/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-reverse-card widget\\n\\n\\\\*/\\n(function () {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  const { widget: Widget } = require('$:/core/modules/widgets/widget.js');\\n  const createCard = require('./createCard');\\n\\n  class ReverseCard extends Widget {\\n    constructor(parseTreeNode, options) {\\n      super(parseTreeNode, options);\\n    }\\n\\n    render(parent, nextSibling) {\\n      this.parentDomNode = parent;\\n      this.computeAttributes();\\n      this.execute();\\n\\n      // priority: attribute -> fiedlds -> default\\n      let { q, a, json } = this.attributes;\\n      const currentTiddler = this.getVariable('currentTiddler');\\n      const { fields } = $tw.wiki.getTiddler(currentTiddler);\\n\\n      // 仅仅支持一个rcard\\n      const { question, answer } = fields;\\n      if (!q) q = question || 'question';\\n      if (!a) a = answer || 'answer';\\n\\n      const domNode = $tw.utils.domMaker('div', {\\n        class: json ? 'flex overflow-scroll space-x-4 snap-x px-12' : '',\\n      });\\n\\n      // TODO: 验证json是否有语法错误\\n      const list = $tw.wiki.getTiddlerDataCached(json) || [{ q, a }];\\n      list.forEach(({ q, a }) => {\\n        domNode.append(createCard(q, a));\\n      });\\n\\n      parent.insertBefore(domNode, nextSibling);\\n      this.domNodes.push(domNode);\\n    }\\n\\n    refresh(changedTiddlers) {\\n      const changedAttributes = this.computeAttributes();\\n      if (changedAttributes.json) {\\n        this.refreshSelf();\\n        return true;\\n      } else {\\n        return false;\\n      }\\n    }\\n  }\\n\\n  /**\\n   * @description neotw-reverse-card widget\\n   * @param xxx\\n   */\\n  exports.rcard = ReverseCard;\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"},\"$:/plugins/oeyoews/neotw-reverse-card/style.css\":{\"title\":\"$:/plugins/oeyoews/neotw-reverse-card/style.css\",\"text\":\".ocard {\\n  perspective: 1000px;\\n  display: inline-block;\\n}\\n\\n.card-inner {\\n  width: 400px;\\n  /* height: 600px; */\\n  transition: transform 0.3s ease-in-out;\\n  transform-style: preserve-3d;\\n}\\n\\n/* tailwindcss 居然还不支持rotate-y-180 可恶, 否则利用group,js 都不需要写了 */\\n.ocard.flipped .card-inner {\\n  transform: rotateY(180deg);\\n}\\n\\n.card-face {\\n  backface-visibility: hidden;\\n}\\n\\n.card-back {\\n  transform: rotateY(180deg);\\n}\\n\",\"tags\":\"$:/tags/Stylesheet\"}}}"}