{"title":"$:/plugins/oeyoews/tiddlywiki-giscus","description":"A Commenting System Powered By Github Discussions","author":"oeyoews","version":"0.0.1","core-version":">=5.2.5","type":"application/json","plugin-type":"plugin","name":"Tiddlywiki Giscus","list":"readme config","dependents":"","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/tiddlywiki-giscus/readme\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-giscus/readme\",\"text\":\"* A Commenting System Powered By Github Discussions. Let Visitors Leave Comments And Reactions On Your Site With Github! This Project Is Strongly Inspired By Utterances.\\n\\n* 注: 从CPL抽离而出\\n\"},\"$:/plugins/oeyoews/tiddlywiki-giscus/config\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-giscus/config\",\"text\":\"\\\\define tid() $:/plugins/oeyoews/gh-repo-btn/github-address\\n\\n<!-- ''filter'' : <$edit-text tiddler=<<tid>> tag=\\\"input\\\" placeholder=\\\"[all[current]prefix[]tag[]!is[draft]]\\\"/> -->\\n\"},\"$:/plugins/oeyoews/tiddlywiki-giscus/filter\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-giscus/filter\",\"text\":\"[all[current]prefix[]tag[]!is[draft]]\\n\"},\"$:/plugins/oeyoews/tiddlywiki-giscus/icon\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-giscus/icon\",\"text\":\"<svg stroke=\\\"\\\" fill=\\\"\\\" stroke-width=\\\"0\\\" t=\\\"1569682881658\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" height=\\\"1em\\\" width=\\\"1em\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><defs></defs><path d=\\\"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zM293 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z\\\"></path><path d=\\\"M894 345c-48.1-66-115.3-110.1-189-130v0.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l0.8 132.6c0 3.2 0.5 6.4 1.5 9.4 5.3 16.9 23.3 26.2 40.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-0.5 0.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102z m505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-0.2-0.1C613.7 788.2 680.7 742.2 729 676c76.4-105.3 88.8-237.6 44.4-350.4l0.6 0.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z\\\"></path><path d=\\\"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z\\\"></path></svg>\\n\"},\"$:/plugins/oeyoews/tiddlywiki-giscus/viewtemplate\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-giscus/viewtemplate\",\"tags\":\"$:/tags/ViewTemplate\",\"text\":\"<$list filter=\\\"[all[current]!is[draft]!is[system]]\\\" variable=\\\"comment\\\">\\n        <h3>\\n          {{$:/plugins/oeyoews/tiddlywiki-giscus/icon}} Comments\\n        </h3>\\n        <$giscus id=<<comment>> lang=\\\"en\\\" theme=\\\"light\\\"/>\\n</$list>\\n\"},\"$:/plugins/oeyoews/tiddlywiki-giscus/style\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-giscus/style\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\"<!-- hide powered -->\\n.gsc-left-header {\\n    display: none !important;\\n}\\n\\n#__next .text-sm {\\n    font-size: .875rem;\\n    line-height: 1.25rem;\\n\\t\\tcolor: red !important;\\n}\\n\"},\"$:/plugins/oeyoews/tiddlywiki-giscus/widget\":{\"title\":\"$:/plugins/oeyoews/tiddlywiki-giscus/widget\",\"module-type\":\"widget\",\"type\":\"application/javascript\",\"text\":\"(function() {\\n    \\\"use strict\\\";\\n    var Widget = require(\\\"$:/core/modules/widgets/widget.js\\\").widget;\\n    var GiscusNodeWidget = function(parseTreeNode, options) {\\n        this.initialise(parseTreeNode, options);\\n    };\\n    GiscusNodeWidget.prototype = new Widget();\\n    GiscusNodeWidget.prototype.render = function(parent, nextSibling) {\\n        this.parentDomNode = parent;\\n        this.computeAttributes();\\n        this.execute();\\n        var id = this.getAttribute(\\\"id\\\", \\\"\\\");\\n        var lang = this.getAttribute(\\\"lang\\\", \\\"en\\\");\\n        var theme = this.getAttribute(\\\"theme\\\", \\\"light\\\");\\n        if (id === '') return;\\n        var scriptNode = this.document.createElement('script');\\n        scriptNode.setAttribute(\\\"src\\\", \\\"https://giscus.app/client.js\\\");\\n        scriptNode.setAttribute(\\\"data-repo\\\", \\\"oeyoews/neotw\\\");\\n        scriptNode.setAttribute(\\\"data-repo-id\\\", \\\"R_kgDOH5A5OA\\\");\\n        scriptNode.setAttribute(\\\"data-category\\\", \\\"General\\\");\\n        scriptNode.setAttribute(\\\"data-category-id\\\", \\\"DIC_kwDOH5A5OM4CRFEE\\\");\\n        scriptNode.setAttribute(\\\"data-mapping\\\", \\\"specific\\\");\\n        scriptNode.setAttribute(\\\"data-term\\\", id);\\n        scriptNode.setAttribute(\\\"data-reactions-enabled\\\", \\\"1\\\");\\n        scriptNode.setAttribute(\\\"data-input-position\\\", \\\"top\\\");\\n        scriptNode.setAttribute(\\\"data-loading\\\", \\\"lazy\\\");\\n        scriptNode.setAttribute(\\\"data-emit-metadata\\\", \\\"0\\\");\\n        scriptNode.setAttribute(\\\"data-theme\\\", theme);\\n        scriptNode.setAttribute(\\\"data-lang\\\", lang);\\n        scriptNode.setAttribute(\\\"crossorigin\\\", \\\"anonymous\\\");\\n        scriptNode.setAttribute(\\\"async\\\", \\\"true\\\");\\n        // Clear other comment nodes' giscus class\\n        var commentNodes = this.document.querySelectorAll('.giscus');\\n        for (var i = 0, len = commentNodes.length; i < len; i++) {\\n            commentNodes[i].classList.remove('giscus');\\n        }\\n        // Find or create\\n      var commentNode = this.document.querySelector('.gk0wk-giscus[tiddler-title=\\\"' + id.replace('\\\"', '\\\\\\\\\\\"') + '\\\"]');\\n      if (!commentNode) {\\n        commentNode = this.document.createElement('div');\\n        commentNode.setAttribute('class', 'giscus gk0wk-giscus');\\n        commentNode.setAttribute('tiddler-title', id);\\n        parent.insertBefore(commentNode, nextSibling);\\n        this.domNodes.push(commentNode);\\n      }\\n        parent.insertBefore(scriptNode, nextSibling);\\n        this.domNodes.push(scriptNode);\\n    };\\n    GiscusNodeWidget.prototype.execute = function() {};\\n    GiscusNodeWidget.prototype.refresh = function() {\\n        var changedAttributes = this.computeAttributes();\\n        if (Object.keys(changedAttributes).length > 0) {\\n            this.refreshSelf();\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    };\\n    exports.giscus = GiscusNodeWidget;\\n})();\\n\"}}}"}