{"title":"$:/plugins/oeyoews/neotw-image-better","description":"neotw-image-better","author":"oeyoews","version":"0.0.3","core-version":">=5.3.0","type":"application/json","plugin-type":"plugin","name":"neotw-image-better","dependents":"","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-image-better/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-image-better/readme\",\"description\":\"neotw-image-better\",\"text\":\"## oimg\\n\\n<$oimg src=\\\"\\\"/>\"},\"$:/plugins/oeyoews/neotw-image-better/style.css\":{\"title\":\"$:/plugins/oeyoews/neotw-image-better/style.css\",\"text\":\".tc-image-loading {\\n  filter: blur(12px);\\n  scale: 1.05;\\n  cursor: wait;\\n}\\n.tc-image-error {\\n  filter: blur(4px);\\n}\\n.tc-image-loaded {\\n  border-radius: 8px;\\n}\\n\",\"tags\":\"$:/tags/Stylesheet\"},\"$:/plugins/oeyoews/neotw-image-better/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-image-better/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-image-better/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\noimg widget\\n\\\\*/\\n\\nconst Widget = require('$:/core/modules/widgets/widget.js').widget;\\n\\nclass ImageWidget extends Widget {\\n  constructor(parseTreeNode, options) {\\n    super(parseTreeNode, options);\\n  }\\n\\n  // TODO: support preset width height\\n  render(parent, nextSibling) {\\n    if (!$tw.browser) return;\\n\\n    this.parentDomNode = parent;\\n    this.computeAttributes();\\n    this.execute();\\n\\n    const twimageobserver = require('$:/plugins/oeyoews/neotw-notion-gallery/twimageobserver.js');\\n\\n    const {\\n      keyword = 'sea',\\n      resolution = '1920x1080',\\n      class: classNames,\\n      src = `https://source.unsplash.com/random/${resolution}/?${keyword}`,\\n    } = this.attributes;\\n\\n    const imageNode = this.document.createElement('img');\\n\\n    imageNode.classList.add('bg-cover', 'aspect-video', 'rounded', 'spotlight');\\n    imageNode.setAttribute('data-src', src);\\n    if (!this.hasAttribute('src')) {\\n      imageNode.title = keyword;\\n    }\\n    classNames && imageNode.classList.add(...classNames.split(' '));\\n    twimageobserver.observe(imageNode);\\n\\n    parent.insertBefore(imageNode, nextSibling);\\n    this.domNodes.push(imageNode);\\n  }\\n}\\n\\n/**\\n * unsplash keyword image\\n * @description 使用unsplash的图片组件\\n * @param {string} keyword\\n * @param {string} class\\n */\\nexports.oimg = ImageWidget;\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}