{"title":"$:/plugins/oeyoews/neotw-counter","description":"Neotw Counter","author":"oeyoews","version":"0.0.1","core-version":">=5.3.0","type":"application/json","parent-plugin":"$:/plugins/oeyoews/neotw","plugin-type":"plugin","name":"Neotw Counter","dependents":"$:/plugins/oeyoews/tiddlywiki-tailwindcss-plus","list":"readme","text":"{\"tiddlers\":{\"$:/plugins/oeyoews/neotw-counter/Action\":{\"title\":\"$:/plugins/oeyoews/neotw-counter/Action\",\"tags\":\"$:/tags/StartupAction/PostRender\",\"text\":\"<$list filter=\\\"[{$:/info/url/search}match[?layout=neotw-counter]]\\\">\\n  <$action-setfield $tiddler=\\\"$:/layout\\\" text=\\\"$:/plugins/oeyoews/neotw-counter/Layout\\\"/>\\n</$list>\"},\"$:/plugins/oeyoews/neotw-counter/Layout\":{\"title\":\"$:/plugins/oeyoews/neotw-counter/Layout\",\"tags\":\"$:/tags/Layout\",\"name\":\"{{$:/plugins/oeyoews/neotw-counter/icon}}\",\"description\":\"{{$:/plugins/oeyoews/neotw-counter/readme!!description}}\",\"text\":\"\\\\import [[$:/core/ui/PageMacros]] [all[shadows+tiddlers]tag[$:/tags/Macro]!has[draft.of]]\\n\\n<$vars\\n\\ttv-config-toolbar-icons={{$:/config/Toolbar/Icons}}\\n\\ttv-config-toolbar-text={{$:/config/Toolbar/Text}}\\n\\ttv-config-toolbar-class={{$:/config/Toolbar/ButtonClass}}\\n\\ttv-enable-drag-and-drop={{$:/config/DragAndDrop/Enable}}\\n\\ttv-show-missing-links={{$:/config/MissingLinks}}\\n\\tstoryviewTitle={{$:/view}}\\n\\tlanguageTitle={{{ [{$:/language}get[name]] }}}>\\n\\n<div class=\\\"prose max-w-none prose-indigo m-auto sm:w-auto md:w-2/3\\\">\\n  {{{ [[$:/plugins/oeyoews/neotw-counter/readme]] ||$:/core/ui/ViewTemplate }}}\\n</div>\"},\"$:/plugins/oeyoews/neotw-counter/readme\":{\"title\":\"$:/plugins/oeyoews/neotw-counter/readme\",\"description\":\"Neotw Counter\",\"text\":\"{{$:/languages/neotw-counter/readme}}\\n\"},\"$:/plugins/oeyoews/neotw-counter/getCounter.js\":{\"title\":\"$:/plugins/oeyoews/neotw-counter/getCounter.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-counter/getCounter.js\\ntype: application/javascript\\nmodule-type: library\\n\\n\\\\*/\\nasync function getCounter() {\\n  let data;\\n  const params = {\\n    user: 'oeyoews',\\n  };\\n\\n  try {\\n    const res = await fetch(\\n      // 'https://nextjs-mdx-blog-tailwindcss.vercel.app/api/counter?user=oeyoews',\\n      'https://nextjs-mdx-blog-tailwindcss.vercel.app/api/posts',\\n    );\\n    if (!res.ok) {\\n      throw new Error(res.statusText);\\n    }\\n    data = await res.json();\\n  } catch (e) {\\n    console.error('Error: ' + e.message);\\n  }\\n  return data.oeyoews.quantity;\\n}\\n\\nmodule.exports = getCounter;\\n\",\"type\":\"application/javascript\",\"module-type\":\"library\"},\"$:/languages/neotw-counter/readme\":{\"title\":\"$:/languages/neotw-counter/readme\",\"text\":\"<div class=\\\"prose max-w-none prose-indigo\\\">\\n\\n!! Neotw Counter\\n\\n* [[Source|https://github.com/oeyoews/neotw/tree/main/plugins/oeyoews/neotw-counter]]\\n* [[Demo|https://oeyoews.github.io/neotw]]\\n\\n</div>\"},\"$:/plugins/oeyoews/neotw-counter/widget.js\":{\"title\":\"$:/plugins/oeyoews/neotw-counter/widget.js\",\"text\":\"/*\\\\\\ntitle: $:/plugins/oeyoews/neotw-counter/widget.js\\ntype: application/javascript\\nmodule-type: widget\\n\\nneotw-counter widget\\n\\n\\\\*/\\n(function () {\\n  /*jslint node: true, browser: true */\\n  /*global $tw: false */\\n  'use strict';\\n\\n  const Widget = require('$:/core/modules/widgets/widget.js').widget;\\n\\n  class DivWidget extends Widget {\\n    constructor(parseTreeNode, options) {\\n      super(parseTreeNode, options);\\n    }\\n\\n    async render(parent, nextSibling) {\\n      if (!$tw.browser) return;\\n\\n      this.parentDomNode = parent;\\n      this.computeAttributes();\\n      this.execute();\\n\\n      const getCounter = require('./getCounter.js');\\n      let counter = await getCounter();\\n\\n      const counterNode = document.createElement('div');\\n      counterNode.textContent = counter;\\n      parent.insertBefore(counterNode, nextSibling);\\n      this.domNodes.push(counterNode);\\n    }\\n  }\\n\\n  exports['counter'] = DivWidget;\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"widget\"}}}"}